<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Input-Formula-Result Cell: A case study in Object Oriented Design</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 5196 2007-06-03 20:25:28Z wiemann $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="input-formula-result-cell-a-case-study-in-object-oriented-design">
<h1 class="title">Input-Formula-Result Cell: A case study in Object Oriented Design</h1>

<!-- -*- coding: utf-8 -*- -->
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#object-literals" id="id5">1&nbsp;&nbsp;&nbsp;Object literals</a></li>
<li><a class="reference internal" href="#constructors-to-preserve-invariants" id="id6">2&nbsp;&nbsp;&nbsp;Constructors to preserve invariants</a></li>
<li><a class="reference internal" href="#mutation" id="id7">3&nbsp;&nbsp;&nbsp;Mutation</a></li>
<li><a class="reference internal" href="#state-encapsulation-and-methods" id="id8">4&nbsp;&nbsp;&nbsp;State Encapsulation and methods</a></li>
<li><a class="reference internal" href="#state-variables-and-observers" id="id9">5&nbsp;&nbsp;&nbsp;State variables and observers</a></li>
<li><a class="reference internal" href="#user-display" id="id10">6&nbsp;&nbsp;&nbsp;User Display</a></li>
<li><a class="reference internal" href="#model-view-separation" id="id11">7&nbsp;&nbsp;&nbsp;Model View Separation</a></li>
<li><a class="reference internal" href="#user-controls" id="id12">8&nbsp;&nbsp;&nbsp;User controls</a></li>
<li><a class="reference internal" href="#controlling-user-interaction-the-model-view-controller" id="id13">9&nbsp;&nbsp;&nbsp;Controlling user interaction: The model view controller</a></li>
<li><a class="reference internal" href="#formula-language" id="id14">10&nbsp;&nbsp;&nbsp;Formula Language</a></li>
<li><a class="reference internal" href="#concurrency" id="id15">11&nbsp;&nbsp;&nbsp;Concurrency</a></li>
<li><a class="reference internal" href="#persistence" id="id16">12&nbsp;&nbsp;&nbsp;Persistence</a></li>
</ul>
</div>
<div class="section" id="object-literals">
<h1><a class="toc-backref" href="#id5">1&nbsp;&nbsp;&nbsp;Object literals</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">Need to aggregate related information.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">Object literal with fields</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="object-literal">object-literal</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="constructors-to-preserve-invariants">
<h1><a class="toc-backref" href="#id6">2&nbsp;&nbsp;&nbsp;Constructors to preserve invariants</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">open tuple with read-only fields: Breaks invariants.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">open tuple with constructor</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="constructor">constructor</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="mutation">
<h1><a class="toc-backref" href="#id7">3&nbsp;&nbsp;&nbsp;Mutation</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">Extend object interface so that object properties may be changed.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">Make fields mutable.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="mutation">mutation</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="state-encapsulation-and-methods">
<h1><a class="toc-backref" href="#id8">4&nbsp;&nbsp;&nbsp;State Encapsulation and methods</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">Making fields mutable breaks invariants.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">encapsulation using lexical scope, field access through methods.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="encapsulation-and-methods">encapsulation-and-methods</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="state-variables-and-observers">
<h1><a class="toc-backref" href="#id9">5&nbsp;&nbsp;&nbsp;State variables and observers</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">previous solution runs recompute in a somewhat ad hoc manner.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">identify state variables and state changes.  Attach
handlers to state change.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="state-variables">state-variables</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="user-display">
<h1><a class="toc-backref" href="#id10">6&nbsp;&nbsp;&nbsp;User Display</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">Display contents of cell.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">Extend the cell to into a Graphical User Interface.
implement GUI using html text input elements for
display.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="user-display">user-display</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="model-view-separation">
<h1><a class="toc-backref" href="#id11">7&nbsp;&nbsp;&nbsp;Model View Separation</a></h1>
<ul>
<li><p class="first">motivation</p>
<blockquote>
<p>previous solution lacks modularity.  Separating the
cell from its view allows us to think about the cell's
semantics independent of its view.  Leads to the
flexibility to attaching multiple views, if necessary.</p>
</blockquote>
</li>
<li><p class="first">solution</p>
<blockquote>
<p>Model and view are separate objects.  The system wires
the view to the model.</p>
</blockquote>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="model-view">model-view</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="user-controls">
<h1><a class="toc-backref" href="#id12">8&nbsp;&nbsp;&nbsp;User controls</a></h1>
<ul>
<li><dl class="first docutils">
<dt>motivation</dt>
<dd><p class="first last">previous solution does not allow user to edit the input
text box.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution</dt>
<dd><p class="first last">Attach DOM events (dblclick and keypress) to
the text box, which now plays the role of an editor.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="user-controls">user-controls</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="controlling-user-interaction-the-model-view-controller">
<h1><a class="toc-backref" href="#id13">9&nbsp;&nbsp;&nbsp;Controlling user interaction: The model view controller</a></h1>
<ul>
<li><p class="first">motivation</p>
<blockquote>
<p>previous solution does not separate the control logic in
the input view from the view itself.</p>
</blockquote>
</li>
<li><p class="first">solution</p>
<blockquote>
<p>View state is separated into data state and control
state.  The controller decides the control state of the
view: whether the view is being edited, whether the input
is valid, etc.  Editor delegates all event handing to the
input-controller.</p>
</blockquote>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="model-view-controller">model-view-controller</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="formula-language">
<h1><a class="toc-backref" href="#id14">10&nbsp;&nbsp;&nbsp;Formula Language</a></h1>
<ul>
<li><p class="first">motivation</p>
<p>Define a concrete syntax for the formula expression
language and accept concrete syntax via the formula input
box.</p>
</li>
<li><p class="first">code directory</p>
<p>Unimplemented as yet.</p>
</li>
</ul>
</div>
<div class="section" id="concurrency">
<h1><a class="toc-backref" href="#id15">11&nbsp;&nbsp;&nbsp;Concurrency</a></h1>
<ul>
<li><p class="first">motivation</p>
<blockquote>
<p>The previous solution allows the cell to be modified via
the API concurrently while input is being edited via
GUI.  We would like concurrent access to the cell be
controlled.</p>
</blockquote>
</li>
<li><p class="first">solution</p>
<blockquote>
<p>A concurrency controller for the model (cell) intercepts
all interaction (API and GUI) with the cell.  A new state
variable Busy determines whether the cell is busy
interacting in a way that could potentially change its
state, e.g, via any of the set methods, or via the text
input by the user through the GUI controls.  When the
cell is busy, interaction is allowed only via limited
interfaces, i.e., only one of the text boxes, or only
some of the API methods.</p>
</blockquote>
</li>
<li><dl class="first docutils">
<dt>code directory</dt>
<dd><p class="first last"><a class="reference external" href="concurrency">concurrency</a></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="persistence">
<h1><a class="toc-backref" href="#id16">12&nbsp;&nbsp;&nbsp;Persistence</a></h1>
<ul>
<li><p class="first">motivation</p>
<blockquote>
<p>Up until now, there was no way to save the cell in a file
and read it back.</p>
</blockquote>
</li>
<li><p class="first">solution</p>
<blockquote>
<p>Extend the interface to include methods that save and
read back the cell's state from a persistent store
(server).</p>
</blockquote>
</li>
<li><p class="first">code directory</p>
<p>Unimplemented as yet.</p>
</li>
</ul>
</div>
</div>
</body>
</html>
